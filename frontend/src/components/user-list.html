<section>
  <div class="flex items-center justify-between mb-3">
    <h2 class="text-lg font-semibold">Usuários</h2>
    <button class="border rounded px-3 py-1" click.trigger="newUser()">
      Novo
    </button>
  </div>

  <form class="mb-3 flex gap-2" submit.trigger="onSearchSubmit($event)">
    <input
      class="border rounded px-2 py-1"
      placeholder="Buscar por usuário ou e-mail"
      value.bind="search"
    />
    <button class="border rounded px-3 py-1">Buscar</button>
  </form>

  <div if.bind="isLoading">Carregando...</div>
  <p if.bind="error" class="text-red-600 text-sm">${error}</p>

  <table if.bind="!isLoading && !error" class="w-full text-sm border-collapse">
    <thead>
      <tr class="border-b">
        <th class="text-left py-2">Usuário</th>
        <th class="text-left py-2">Email</th>
        <th class="text-left py-2">Status</th>
        <th class="text-right py-2"></th>
      </tr>
    </thead>
    <tbody>
      <tr repeat.for="u of users" class="border-b">
        <td class="py-2">${u.usuario}</td>
        <td class="py-2">${u.email}</td>
        <td class="py-2">${u.ativo ? 'Ativo' : 'Inativo'}</td>
        <td class="py-2 text-right">
          <button class="underline mr-3" click.trigger="editUser(u.id)">
            Editar
          </button>
          <button
            class="underline text-red-600"
            click.trigger="deleteUser(u.id)"
          >
            Remover
          </button>
        </td>
      </tr>
      <tr if.bind="users.length === 0">
        <td colspan="4" class="py-4 text-center text-slate-500">
          Nenhum usuário encontrado.
        </td>
      </tr>
    </tbody>
  </table>

  <div
    if.bind="!isLoading && total > pageSize"
    class="mt-3 flex items-center justify-between"
  >
    <button
      class="border rounded px-3 py-1"
      disabled.bind="page === 1"
      click.trigger="prevPage()"
    >
      Anterior
    </button>
    <span class="text-sm"
      >Página ${page} de ${Math.ceil(total / pageSize)}</span
    >
    <button
      class="border rounded px-3 py-1"
      disabled.bind="page * pageSize >= total"
      click.trigger="nextPage()"
    >
      Próxima
    </button>
  </div>
</section>
