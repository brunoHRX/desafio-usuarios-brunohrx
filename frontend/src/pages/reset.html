<template>
  <section
    class="min-h-screen grid place-items-center p-4 bg-background text-foreground"
  >
    <div
      class="w-full max-w-sm bg-card text-card-foreground border border-border rounded-xl shadow-sm p-6"
    >
      <h1 class="text-xl font-semibold tracking-tight mb-2">Redefinir senha</h1>

      <!-- Alerta de erro -->
      <p
        if.bind="error"
        class="mb-3 text-sm text-destructive bg-destructive/10 border border-destructive/30 rounded-md px-3 py-2"
      >
        ${error}
      </p>

      <form submit.trigger="submit()" class="space-y-4" novalidate>
        <label class="block space-y-1">
          <span class="text-xs sm:text-sm text-muted-foreground"
            >Nova senha</span
          >
          <input
            class="w-full rounded-md bg-background text-foreground border border-input px-3 py-2 placeholder:text-muted-foreground outline-none focus-visible:ring-2 focus-visible:ring-ring transition-shadow disabled:opacity-60"
            type="password"
            value.bind="novaSenha"
            minlength="8"
            required
            placeholder="••••••••"
          />
        </label>

        <label class="block space-y-1">
          <span class="text-xs sm:text-sm text-muted-foreground"
            >Confirmar nova senha</span
          >
          <input
            class="w-full rounded-md bg-background text-foreground border border-input px-3 py-2 placeholder:text-muted-foreground outline-none focus-visible:ring-2 focus-visible:ring-ring transition-shadow disabled:opacity-60"
            type="password"
            value.bind="confirmacaoSenha"
            minlength="8"
            required
            placeholder="••••••••"
          />
          <small if.bind="tried && !senhaOk" class="text-xs text-destructive">
            Senha precisa ter ao menos 8 caracteres e coincidir com a
            confirmação.
          </small>
        </label>

        <button
          class="w-full inline-flex items-center justify-center rounded-md px-4 py-2 text-sm font-medium bg-primary text-primary-foreground hover:bg-primary/90 border border-border focus-visible:ring-2 focus-visible:ring-ring transition-colors disabled:opacity-60"
          disabled.bind="isLoading"
        >
          ${isLoading ? 'Redefinindo...' : 'Redefinir'}
        </button>
      </form>

      <div class="text-sm mt-4">
        <button
          class="inline-flex items-center gap-1 rounded-md px-2 py-1 text-foreground hover:bg-muted/60 border border-border focus-visible:ring-2 focus-visible:ring-ring transition-colors"
          type="button"
          click.trigger="goLogin()"
        >
          Voltar ao login
        </button>
      </div>
    </div>
  </section>
</template>
