<template>
  <section class="page-head">
    <h1>Usu√°rios</h1>
    <div style="display: flex; gap: 0.6rem; align-items: center">
      <input
        placeholder="Buscar usu√°rio ou e-mail"
        value.bind="search"
        input.trigger="doSearch()"
      />
      <button class="plus" title="Adicionar" click.trigger="openCreate()">
        Ôºã
      </button>
    </div>
  </section>

  <div if.bind="loading">Carregando...</div>

  <table class="data-table" if.bind="!loading">
    <thead>
      <tr>
        <th>Usu√°rio</th>
        <th>E-mail</th>
        <th>Status</th>
        <th style="width: 1%">A√ß√µes</th>
      </tr>
    </thead>
    <tbody>
      <tr repeat.for="u of items; key.bind: u.id">
        <td>${u.usuario}</td>
        <td>${u.email}</td>
        <td>
          <span class="badge ${u.ativo ? 'green' : 'gray'}"
            >${u.ativo ? 'Ativo' : 'Inativo'}</span
          >
        </td>
        <td class="row-actions">
          <button class="ghost" title="Editar" click.trigger="openEdit(u)">
            ‚úé
          </button>
          <button
            class="ghost"
            title="${u.ativo ? 'Desativar' : 'Reativar'}"
            click.trigger="toggle(u)"
          >
            ${u.ativo ? 'Desativar' : 'Reativar'}
          </button>
          <button
            class="danger ghost"
            title="Remover (soft delete)"
            click.trigger="remove(u)"
          >
            üóë
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <div
    style="
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 0.6rem;
    "
  >
    <small>Total: ${total}</small>
    <div style="display: flex; gap: 0.4rem; align-items: center">
      <button class="ghost" disabled.bind="page===1" click.trigger="prevPage()">
        ‚Üê
      </button>
      <span>P√°gina ${page}</span>
      <button
        class="ghost"
        disabled.bind="page*pageSize>=total"
        click.trigger="nextPage()"
      >
        ‚Üí
      </button>
    </div>
  </div>
</template>
